!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var i in s)("object"==typeof exports?exports:t)[i]=s[i]}}(window,(function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){(function(e){const i=s(3),n="undefined"==typeof window?e:window;n.loaders=n.loaders||{},t.exports=Object.assign(n.loaders,i)}).call(this,s(2))},,function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},function(t,e,s){"use strict";function i(t){let e=1/0,s=1/0,i=1/0,n=-1/0,r=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],l=a&&a.length;for(let t=0;t<l;t+=3){const l=a[t],c=a[t+1],u=a[t+2];e=l<e?l:e,s=c<s?c:s,i=u<i?u:i,n=l>n?l:n,r=c>r?c:r,o=u>o?u:o}return[[e,s,i],[n,r,o]]}s.r(e),s.d(e,"OBJWorkerLoader",(function(){return R})),s.d(e,"OBJLoader",(function(){return $})),s.d(e,"_typecheckOBJLoader",(function(){return k}));const n=/^[og]\s*(.+)?/,r=/^mtllib /,o=/^usemtl /;class a{constructor({index:t,name:e="",mtllib:s,smooth:i,groupStart:n}){this.index=t,this.name=e,this.mtllib=s,this.smooth=i,this.groupStart=n,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}clone(t=this.index){return new a({index:t,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})}}class l{constructor(t=""){this.name=t,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0,this.fromDeclaration=null}startMaterial(t,e){const s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);const i=new a({index:this.materials.length,name:t,mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==s?s.smooth:this.smooth,groupStart:void 0!==s?s.groupEnd:0});return this.materials.push(i),i}currentMaterial(){if(this.materials.length>0)return this.materials[this.materials.length-1]}_finalize(t){const e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(let t=this.materials.length-1;t>=0;t--)this.materials[t].groupCount<=0&&this.materials.splice(t,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}}class c{constructor(){this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}startObject(t,e=!0){if(this.object&&!this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=e);const s=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object=new l(t),this.object.fromDeclaration=e,s&&s.name&&"function"==typeof s.clone){const t=s.clone(0);t.inherited=!0,this.object.materials.push(t)}this.objects.push(this.object)}finalize(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)}parseVertexIndex(t,e){const s=parseInt(t);return 3*(s>=0?s-1:s+e/3)}parseNormalIndex(t,e){const s=parseInt(t);return 3*(s>=0?s-1:s+e/3)}parseUVIndex(t,e){const s=parseInt(t);return 2*(s>=0?s-1:s+e/2)}addVertex(t,e,s){const i=this.vertices,n=this.object.geometry.vertices;n.push(i[t+0],i[t+1],i[t+2]),n.push(i[e+0],i[e+1],i[e+2]),n.push(i[s+0],i[s+1],i[s+2])}addVertexPoint(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}addVertexLine(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}addNormal(t,e,s){const i=this.normals,n=this.object.geometry.normals;n.push(i[t+0],i[t+1],i[t+2]),n.push(i[e+0],i[e+1],i[e+2]),n.push(i[s+0],i[s+1],i[s+2])}addColor(t,e,s){const i=this.colors,n=this.object.geometry.colors;n.push(i[t+0],i[t+1],i[t+2]),n.push(i[e+0],i[e+1],i[e+2]),n.push(i[s+0],i[s+1],i[s+2])}addUV(t,e,s){const i=this.uvs,n=this.object.geometry.uvs;n.push(i[t+0],i[t+1]),n.push(i[e+0],i[e+1]),n.push(i[s+0],i[s+1])}addUVLine(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])}addFace(t,e,s,i,n,r,o,a,l){const c=this.vertices.length;let u=this.parseVertexIndex(t,c),h=this.parseVertexIndex(e,c),d=this.parseVertexIndex(s,c);if(this.addVertex(u,h,d),void 0!==i&&""!==i){const t=this.uvs.length;u=this.parseUVIndex(i,t),h=this.parseUVIndex(n,t),d=this.parseUVIndex(r,t),this.addUV(u,h,d)}if(void 0!==o&&""!==o){const t=this.normals.length;u=this.parseNormalIndex(o,t),h=o===a?u:this.parseNormalIndex(a,t),d=o===l?u:this.parseNormalIndex(l,t),this.addNormal(u,h,d)}this.colors.length>0&&this.addColor(u,h,d)}addPointGeometry(t){this.object.geometry.type="Points";const e=this.vertices.length;for(const s of t)this.addVertexPoint(this.parseVertexIndex(s,e))}addLineGeometry(t,e){this.object.geometry.type="Line";const s=this.vertices.length,i=this.uvs.length;for(const e of t)this.addVertexLine(this.parseVertexIndex(e,s));for(const t of e)this.addUVLine(this.parseUVIndex(t,i))}}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class h{constructor(t,e){u(this,"fields",void 0),u(this,"metadata",void 0),function(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(t)),function(t){const e={};for(const s of t)e[s.name]&&console.warn("Schema: duplicated field name",s.name,s),e[s.name]=!0}(t),this.fields=t,this.metadata=e||new Map}compareTo(t){if(this.metadata!==t.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(let e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0}select(...t){const e=Object.create(null);for(const s of t)e[s]=!0;const s=this.fields.filter(t=>e[t.name]);return new h(s,this.metadata)}selectAt(...t){const e=t.map(t=>this.fields[t]).filter(Boolean);return new h(e,this.metadata)}assign(t){let e,s=this.metadata;if(t instanceof h){const i=t;e=i.fields,s=d(d(new Map,this.metadata),i.metadata)}else e=t;const i=Object.create(null);for(const t of this.fields)i[t.name]=t;for(const t of e)i[t.name]=t;const n=Object.values(i);return new h(n,s)}}function d(t,e){return new Map([...t||new Map,...e||new Map])}let p,m,f,y,b,g,v,x,I;function S(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(p||(p={}));class w{static isNull(t){return t&&t.typeId===p.Null}static isInt(t){return t&&t.typeId===p.Int}static isFloat(t){return t&&t.typeId===p.Float}static isBinary(t){return t&&t.typeId===p.Binary}static isUtf8(t){return t&&t.typeId===p.Utf8}static isBool(t){return t&&t.typeId===p.Bool}static isDecimal(t){return t&&t.typeId===p.Decimal}static isDate(t){return t&&t.typeId===p.Date}static isTime(t){return t&&t.typeId===p.Time}static isTimestamp(t){return t&&t.typeId===p.Timestamp}static isInterval(t){return t&&t.typeId===p.Interval}static isList(t){return t&&t.typeId===p.List}static isStruct(t){return t&&t.typeId===p.Struct}static isUnion(t){return t&&t.typeId===p.Union}static isFixedSizeBinary(t){return t&&t.typeId===p.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===p.FixedSizeList}static isMap(t){return t&&t.typeId===p.Map}static isDictionary(t){return t&&t.typeId===p.Dictionary}get typeId(){return p.NONE}compareTo(t){return this===t}}Symbol.toStringTag;Symbol.toStringTag;m=Symbol.toStringTag;class j extends w{constructor(t,e){super(),S(this,"isSigned",void 0),S(this,"bitWidth",void 0),this.isSigned=t,this.bitWidth=e}get typeId(){return p.Int}get[m](){return"Int"}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}class T extends j{constructor(){super(!0,8)}}class O extends j{constructor(){super(!0,16)}}class F extends j{constructor(){super(!0,32)}}class M extends j{constructor(){super(!1,8)}}class L extends j{constructor(){super(!1,16)}}class U extends j{constructor(){super(!1,32)}}const z=32,D=64;f=Symbol.toStringTag;class N extends w{constructor(t){super(),S(this,"precision",void 0),this.precision=t}get typeId(){return p.Float}get[f](){return"Float"}toString(){return"Float"+this.precision}}class A extends N{constructor(){super(z)}}class V extends N{constructor(){super(D)}}Symbol.toStringTag;Symbol.toStringTag;y=Symbol.toStringTag;b=Symbol.toStringTag;g=Symbol.toStringTag;v=Symbol.toStringTag;x=Symbol.toStringTag;class B extends w{constructor(t,e){super(),S(this,"listSize",void 0),S(this,"children",void 0),this.listSize=t,this.children=[e]}get typeId(){return p.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[x](){return"FixedSizeList"}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}I=Symbol.toStringTag;function P(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class _{constructor(t,e,s=!1,i=new Map){P(this,"name",void 0),P(this,"type",void 0),P(this,"nullable",void 0),P(this,"metadata",void 0),this.name=t,this.type=e,this.nullable=s,this.metadata=i}get typeId(){return this.type&&this.type.typeId}clone(){return new _(this.name,this.type,this.nullable,this.metadata)}compareTo(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}toString(){return`${this.type}${this.nullable?", nullable":""}${this.metadata?", metadata: "+this.metadata:""}`}}function C(t,e){const s=new Map;for(const t in e)"value"!==t&&s.set(t,JSON.stringify(e[t]));const i=function(t){switch(t.constructor){case Int8Array:return new T;case Uint8Array:return new M;case Int16Array:return new O;case Uint16Array:return new L;case Int32Array:return new F;case Uint32Array:return new U;case Float32Array:return new A;case Float64Array:return new V;default:throw new Error("array type not supported")}}(e.value),n=!("size"in e)||1===e.size;return new _(t,n?i:new B(e.size,new _("value",i)),!1,s)}function E(t,e){const{meshes:s}=(t=>{const e=new c;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const s=t.split("\n");let i="",a="",l=0,u=[];const h="function"==typeof"".trimLeft;for(let t=0,c=s.length;t<c;t++)if(i=s[t],i=h?i.trimLeft():i.trim(),l=i.length,0!==l&&(a=i.charAt(0),"#"!==a))if("v"===a){const t=i.split(/\s+/);switch(t[0]){case"v":e.vertices.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),8===t.length&&e.colors.push(parseFloat(t[4]),parseFloat(t[5]),parseFloat(t[6]));break;case"vn":e.normals.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]));break;case"vt":e.uvs.push(parseFloat(t[1]),parseFloat(t[2]))}}else if("f"===a){const t=i.substr(1).trim().split(/\s+/),s=[];for(let e=0,i=t.length;e<i;e++){const i=t[e];if(i.length>0){const t=i.split("/");s.push(t)}}const n=s[0];for(let t=1,i=s.length-1;t<i;t++){const i=s[t],r=s[t+1];e.addFace(n[0],i[0],r[0],n[1],i[1],r[1],n[2],i[2],r[2])}}else if("l"===a){const t=i.substring(1).trim().split(" ");let s;const n=[];if(-1===i.indexOf("/"))s=t;else{s=[];for(let e=0,i=t.length;e<i;e++){const i=t[e].split("/");""!==i[0]&&s.push(i[0]),""!==i[1]&&n.push(i[1])}}e.addLineGeometry(s,n)}else if("p"===a){const t=i.substr(1).trim().split(" ");e.addPointGeometry(t)}else if(null!==(u=n.exec(i))){const t=(" "+u[0].substr(1).trim()).substr(1);e.startObject(t)}else if(o.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(r.test(i))e.materialLibraries.push(i.substring(7).trim());else{if("s"!==a){if("\0"===i)continue;throw new Error(`Unexpected line: "${i}"`)}{if(u=i.split(" "),u.length>1){const t=u[1].trim().toLowerCase();e.object.smooth="0"!==t&&"off"!==t}else e.object.smooth=!0;const t=e.object.currentMaterial();t&&(t.smooth=e.object.smooth)}}e.finalize();const d=[],p=[];for(const t of e.objects){const{geometry:e}=t;if(0===e.vertices.length)continue;const s={header:{vertexCount:e.vertices.length/3},attributes:{}};switch(e.type){case"Points":s.mode=0;break;case"Line":s.mode=1;break;default:s.mode=4}s.attributes.POSITION={value:new Float32Array(e.vertices),size:3},e.normals.length>0&&(s.attributes.NORMAL={value:new Float32Array(e.normals),size:3}),e.colors.length>0&&(s.attributes.COLOR_0={value:new Float32Array(e.colors),size:3}),e.uvs.length>0&&(s.attributes.TEXCOORD_0={value:new Float32Array(e.uvs),size:2}),s.materials=[];for(const e of t.materials){const t={name:e.name,flatShading:!e.smooth};s.materials.push(t),p.push(t)}s.name=t.name,d.push(s)}return{meshes:d,materials:p}})(t),a=s.reduce((t,e)=>t+e.header.vertexCount,0),l=function(t,e){const s=new Float32Array(3*e);let i,n,r,o=0;for(const a of t){const{POSITION:t,NORMAL:l,COLOR_0:c,TEXCOORD_0:u}=a.attributes;s.set(t.value,3*o),l&&(i=i||new Float32Array(3*e),i.set(l.value,3*o)),c&&(n=n||new Float32Array(3*e),n.set(c.value,3*o)),u&&(r=r||new Float32Array(2*e),r.set(u.value,2*o)),o+=t.value.length/3}const a={};a.POSITION={value:s,size:3},i&&(a.NORMAL={value:i,size:3});n&&(a.COLOR_0={value:n,size:3});r&&(a.TEXCOORD_0={value:r,size:2});return a}(s,a),u={vertexCount:a,boundingBox:i(l)};return{loaderData:{header:{}},schema:function(t,e={}){let s;for(const t in e)s=s||new Map,"value"!==t&&s.set(t,JSON.stringify(e[t]));const i=[];for(const e in t){const s=C(e,t[e]);i.push(s)}return new h(i,s)}(l,{mode:4,boundingBox:u.boundingBox}),header:u,mode:4,attributes:l}}const R={name:"OBJ",id:"obj",module:"obj",version:"3.0.1",worker:!0,extensions:["obj"],mimeTypes:["text/plain"],testText:function(t){return"v"===t[0]},options:{obj:{}}};const $={...R,parse:async(t,e)=>E((new TextDecoder).decode(t)),parseTextSync:E},k=$}])}));
//# sourceMappingURL=dist.min.js.map